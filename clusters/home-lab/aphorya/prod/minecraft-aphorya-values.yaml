---
minecraftServer:
  eula: true
  version: "1.19.2"
  motd: "Aphorya"
  pvp: true
  memory: 6G
  ops: "juldoc,RaKk0o"
  whitelist: "juldoc,RaKk0o"
  type: "SPIGOT"
  externalTrafficPolicy: Cluster
  serviceType: LoadBalancer
  loadBalancerIP: 192.168.1.250
  servicePort: 25555
  extraPorts:
    - name: metrics
      containerPort: 9940
      protocol: TCP
      ingress:
        enabled: false
      service:
        enabled: true
        type: ClusterIP
        port: 9940
podAnnotations:
  prometheus.io/port: '9940'
  prometheus.io/scrape: true

serviceAnnotations:
  metallb.universe.tf/allow-shared-ip: prod
readinessProbe:
  initialDelaySeconds: 120
  failureThreshold: 100
livenessProbe:
  initialDelaySeconds: 120
  failureThreshold: 100
resources:
  limits:
    cpu: "8"
    memory: 9G
  requests:
    cpu: "4"
    memory: 9G
tolerations:
  - key: ram
    operator: Exists
    effect: NoSchedule
persistence:
  dataDir:
    enabled: true
    existingClaim: minecraft-aphorya-datadir
extraVolumes:
  - volumeMounts:
      - name: plugin-updates
        mountPath: /data/plugins/update/
        readOnly: true
      - name: nametagedit
        mountPath: /data/plugins/NametagEdit/
        readOnly: true
      - name: worldedit
        mountPath: /etc/minecraft-config/plugins/WorldEdit/
        readOnly: true
      - name: mycommand
        mountPath: /etc/minecraft-config/plugins/MyCommand/
        readOnly: true
      - name: mycommand-commands
        mountPath: /etc/minecraft-config/plugins/MyCommand/commands/
        readOnly: true
      - name: prometheusexporter
        mountPath: /data/plugins/PrometheusExporter
        readOnly: true
    volumes:
      - name: worldedit
        configMap:
          name: minecraft-aphorya-worldedit
      - name: mycommand-commands
        configMap:
          name: minecraft-aphorya-mycommand-commands
      - name: mycommand
        configMap:
          name: minecraft-aphorya-mycommand
      - name: nametagedit
        configMap:
          name: minecraft-aphorya-nametagedit
      - name: prometheusexporter
        configMap:
          name: minecraft-aphorya-prometheusexporter
      - name: plugin-updates
        nfs:
          server: 192.168.69.42
          path: /volume1/kubernetes_storage/minecraft-plugins
