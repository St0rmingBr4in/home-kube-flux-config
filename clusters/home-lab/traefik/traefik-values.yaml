---
certResolvers:
  letsencrypt:
    email: julien.doche@gmail.com
    dnsChallenge:
      provider: digitalocean
      delayBeforeCheck: 30
      resolvers:
        - ns1.digitalocean.com
        - ns2.digitalocean.com
        - ns3.digitalocean.com
env:
  - name: DO_AUTH_TOKEN
    valueFrom:
      secretKeyRef:
        key: DO_AUTH_TOKEN
        name: traefik-dnsprovider-config
ports:
  web:
    redirectTo: websecure
  websecure:
    tls:
      enabled: true
      storage: /data/acme.json
      certResolver: letsencrypt
      domains:
        - main: "ilovecara.ml"
          sans:
            - "*.ilovecara.ml"

service:
  annotations:
    metallb.universe.tf/allow-shared-ip: prod
  spec:
    loadBalancerIP: 192.168.1.250

persistence:
  enabled: true
  existingClaim: "traefik-acme"

additionalArguments:
  - "--certificatesresolvers.letsencrypt.acme.storage=/data/acme.json"

resources:
  requests:
    cpu: 500m
    memory: 110Mi
  limits:
    cpu: 500m
    memory: 110Mi
