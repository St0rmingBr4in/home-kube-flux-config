---
operator:
  verify:
    enabled: false
  traefik:
    namespace: prod-infra

# Schedule main prowlarr pod on same node as any prowlarr component (for iSCSI sharing)
affinity:
  podAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values: ["prowlarr"]
        topologyKey: kubernetes.io/hostname

ingress:
  main:
    integrations:
      traefik:
        enableFixedMiddlewares: false
        middlewares:
          - name: basic-auth
            namespace: prod-infra
    enabled: true
    hosts:
      - host: prowlarr.st0rmingbr4in.com
        paths:
          - path: /

resources:
  limits:
    memory: 200Mi
  requests:
    cpu: 100m
    memory: 200Mi

exportarrResources:
  limits:
    memory: 100Mi
  requests:
    cpu: 100m
    memory: 100Mi

# Ensure exportarr also schedules on same node as any prowlarr component
exportarrAffinity:
  podAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values: ["prowlarr"]
        topologyKey: kubernetes.io/hostname

persistence:
  config:
    enabled: true
    existingClaim: prowlarr-config
